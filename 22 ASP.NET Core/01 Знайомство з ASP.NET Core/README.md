# Знайомство з ASP.NET Core

У цій главі розглядаються ASP.NET Core, C# та платформа веб-розробки .NET. Розділ починається зі вступу до ASP.NET MVC та основ шаблону MVC, реалізованого в ASP.NET Core. Далі ви створите рішення та три проекти ASP.NET Core, які будуть розроблені протягом решти глави. Перша програма, AutoLot.Api, — це RESTful-сервіс ASP.NET Core, друга — це веб-програма ASP.NET Core, що використовує шаблон Model-View-Controller, а остання програма — це веб-програма ASP.NET Core, що використовує сторінки Razor. Сервіси RESTful слугують додатковим сервером для програм MVC та Razor Page, а проекти AutoLot.Dal та AutoLot.Models, які ви створили раніше в цій книзі, слугуватимуть рівнем доступу до даних для всіх програм.
Після створення проектів та рішення, у наступному розділі демонструються численні способи запуску та налагодження проектів ASP.NET Core за допомогою Visual Studio або Visual Studio Code. У решті цього розділу розглядаються численні функції ASP.NET, які були перенесені в ASP.NET Core. Це включає контролери та дії, маршрутизацію, прив'язку та перевірку моделей, і, нарешті, фільтри.

## Короткий огляд ASP.NET MVC

Фреймворк ASP.NET MVC базується на шаблоні Model-View-Controller і запропонував відповідь розробникам, яких розчарували WebForms, що по суті було ненадійною абстракцією поверх HTTP. WebForms було створено, щоб допомогти розробникам клієнт-серверних систем перейти до Інтернету, і в цьому відношенні воно було досить успішним. Однак, оскільки розробники звикали до веб-розробки, багато хто хотів мати більше контролю над відображенням результату, позбутися стану перегляду та дотримуватися перевіреного шаблону проектування веб-застосунків. З огляду на ці цілі, було створено ASP.NET MVC.

## Знайомство з шаблоном MVC

Шаблон Model-View-Controller (MVC) існує з 1970-х років, спочатку створений як шаблон для використання в Smalltalk. Цей шаблон нещодавно знову набув популярності, його реалізації були здійснені багатьма різними мовами програмування, включаючи Java (Spring Framework), Ruby (Ruby on Rails) та .NET (ASP.NET MVC).

![MVC](MVC.jpg)


### Модель (The Model)

Модель – це дані вашої програми. Дані зазвичай представлені звичайними об'єктами CLR (POCO). Моделі переглядів складаються з однієї або кількох моделей та спеціально сформовані для споживача даних. Один зі способів мислення про моделі та моделі переглядів – це пов'язати їх з таблицями бази даних та переглядами бази даних.
З академічної точки зору, моделі повинні бути надзвичайно чистими та не містити валідації чи будь-яких інших бізнес-правил. Прагматично, те, чи містять моделі логіку валідації чи інші бізнес-правила, повністю залежить від мови та фреймворків, що використовуються, а також від конкретних потреб програми. Наприклад, EF Core містить багато анотацій даних, які одночасно слугують механізмом формування таблиць бази даних та засобом валідації у вебзастосунках ASP.NET Core. У цій главі приклади зосереджені на зменшенні дублювання коду, що розміщує анотації та перевірки даних там, де вони мають найбільший сенс.

### Представлення (The View)

Представлення (View) – це інтерфейс користувача програми. Представлення приймають команди та відображають результати цих команд користувачеві. Представлення має бути якомога легшим і фактично не обробляти жодної роботи, а передавати всю роботу контролеру. Представлення зазвичай строго типізовані з моделлю, хоча це не є обов'язковим.

### Контролер (The Controller)

Контролер – це мозок програми. Контролери приймають команди/запити від користувача (через представлення) або клієнта (через виклики API) за допомогою методів дій та обробляють їх належним чином. Результати операції потім повертаються користувачеві або клієнту. Контролери повинні бути легкими та використовувати інші компоненти або сервіси для обробки деталей запитів. Це сприяє розділенню завдань та підвищує тестованість і зручність обслуговування.

## ASP.NET Core та шаблон MVC

ASP.NET Core здатний створювати багато типів веб-застосунків та сервісів. Два варіанти – це веб-застосунки, що використовують шаблон MVC, та RESTful-сервіси. Типи веб-застосунків MVC та API-застосунків мають спільні частини шаблону «модель» та «контролер». Веб-застосунки MVC також реалізують «вигляд» для завершення шаблону MVC.

## ASP.NET Core та .NET Core

Так само, як Entity Framework Core є повним переписом Entity Framework 6, ASP.NET Core є переписом популярного ASP.NET Framework. Переписування ASP.NET було нелегким завданням, але воно було необхідним для усунення залежності від System.Web. Видалення цієї залежності дозволило ASP.NET-додаткам запускатися на операційних системах, відмінних від Windows, та на інших веб-серверах, окрім служб інформаційних служб Інтернету (IIS), включаючи локально розміщені. Це відкрило двері для застосунків ASP.NET Core для використання кросплатформного, легкого, швидкого веб-сервера з відкритим кодом під назвою Kestrel. Kestrel пропонує єдиний досвід розробки на всіх платформах.
Як і EF Core, ASP.NET Core розробляється на GitHub як повністю відкритий проект (https://github.com/aspnet). Він також розроблений як модульна система пакетів NuGet. Розробники встановлюють лише ті функції, які потрібні для конкретної програми, мінімізуючи обсяг застосунку, зменшуючи накладні витрати та зменшуючи ризики безпеки. Додаткові покращення включають спрощений запуск, вбудоване впровадження залежностей, чистішу систему конфігурації та підключаємо проміжне програмне забезпечення.

## Один фреймворк, багато застосувань

За допомогою ASP.NET Core ви можете створювати застосунки, що використовують Razor Pages, шаблон Model-View-Controller, RESTful сервіси та SPA-застосунки за допомогою Blazor WebAssembly або фреймворків JavaScript, таких як Angular та React. Хоча візуалізація інтерфейсу користувача залежить від вибору між MVC, Razor Pages та фреймворками JavaScript, базовий фреймворк розробки на стороні сервера однаковий для всіх варіантів. Blazor WebAssembly — це клієнтський фреймворк для розробки, який не має серверного компонента, як інші типи додатків ASP.NET Core. 

# Створення та налаштування рішення й проектів

Перш ніж заглибитися в деякі основні концепції ASP.NET Core, давайте створимо рішення та проекти, які будуть використовуватися в решті розділів. Проєкти ASP.NET Core можна створювати за допомогою Visual Studio або командного рядка.

## Використання Visual Studio 2022

Visual Studio має перевагу графічного інтерфейсу, який покроково покроково керує процесом створення рішення та проектів, додавання пакетів NuGet та створення посилань між проектами. 

Почніть зі створення нового проекту у Visual Studio. Виберіть шаблон C# ASP.NET Core Web API у діалоговому вікні «Create a new project». У діалоговому вікні «Configure your new project» введіть AutoLot.Api як назву проекту та AutoLot як назву рішення. На екрані Додаткова інформація залиште прапорці «Configure for HTTPS» та «Enable OpenAPI». Потім натисніть кнопку Create.

Тепер додайте до рішення ще один веб-застосунок ASP.NET Core. Виберіть шаблон «ASP.NET Core Web App (Model-View-Controller)». Назвіть проект AutoLot.Mvc і опція «Налаштувати для HTTPS» позначена.

Далі додайте до рішення останню веб-програму ASP.NET Core. Виберіть шаблон «ASP.NET Core Web App(Razor Pages)». Назвіть проект AutoLot.Web та позначте опцію «Configure for HTTPS». 

Нарешті, додайте до проєкту C# Class Library та назвіть її AutoLot.Services.

## Додавання AutoLot.Models та AutoLot.Dal

 


